# Docker image
# Build a Docker image to deploy, run, or push to a container registry.
# Add steps that use Docker Compose, tag images, push to a registry, run an image, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

pool:
  vmImage: 'Ubuntu 16.04'

steps:
- task: Docker@1
  displayName: 'Build an image'
  inputs:
    azureSubscriptionEndpoint: 'erjohnContainerRegistry'
    azureContainerRegistry: erjohnContainerRegistry.azurecr.io

# - task: Docker@1
#   displayName: 'Push an image'
#   inputs:
#     azureSubscriptionEndpoint: 'erjohnContainerRegistry'
#     azureContainerRegistry: erjohnContainerRegistry.azurecr.io
#     command: 'Push an image'

# - task: AzureRmWebAppDeployment@4
#   displayName: 'Azure App Service Deploy: adventworkstest1'
#   inputs:
#     azureSubscription: 'erjohnContainerRegistry'
#     appType: webAppContainer
#     WebAppName: erjohnWebApp
#     DockerNamespace: erjohnContainerRegistry.azurecr.io
#     DockerRepository: 'erjohnms/pipelines-javascript'
#     DockerImageTag: '$(Build.BuildId)'

- task: Docker@1
  inputs:
    azureSubscriptionEndpoint: VCWorkflows_Eng
    azureContainerRegistry: erjohncontainerregistry.azurecr.io
    command: Push an image
